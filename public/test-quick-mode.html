<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«é€Ÿæ ‡æ³¨æ¨¡å¼æµ‹è¯•</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* ç¡®ä¿æ ¼å¼å·¥å…·æ å¯è§ */
        .formatting-toolbar {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 14px 18px;
            border: 2px solid var(--border);
            border-radius: 16px;
            background: linear-gradient(135deg, #f8f9ff 0%, #f3f5ff 100%);
            margin-bottom: 16px;
        }

        .format-group {
            display: flex;
            gap: 8px;
        }

        /* æµ‹è¯•è¯´æ˜ */
        .test-info {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .test-info h2 {
            margin: 0 0 12px 0;
            color: #1e40af;
        }

        .test-info ol {
            margin: 0;
            padding-left: 20px;
        }

        .test-info li {
            margin: 8px 0;
            line-height: 1.6;
        }

        .status-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            border: 2px solid #d1d5db;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-width: 200px;
        }

        .status-indicator h3 {
            margin: 0 0 12px 0;
            font-size: 14px;
            color: #6b7280;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            margin: 6px 0;
            font-size: 13px;
        }

        .status-value {
            font-weight: 600;
            color: #2563eb;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- æµ‹è¯•è¯´æ˜ -->
        <div class="test-info">
            <h2>ğŸ§ª å¿«é€Ÿæ ‡æ³¨æ¨¡å¼æµ‹è¯•</h2>
            <ol>
                <li><strong>ç‚¹å‡»é¢œè‰²</strong>ï¼ˆä¸‹æ–¹åœ†å½¢æŒ‰é’®ï¼‰â†’ æŒ‰é’®åº”æœ‰è“è‰²è¾¹æ¡†</li>
                <li><strong>ç‚¹å‡» B æŒ‰é’®</strong> â†’ æŒ‰é’®åº”å˜è“è‰²</li>
                <li><strong>ç‚¹å‡»"å¿«é€Ÿæ ‡æ³¨"</strong> â†’ æŒ‰é’®åº”å˜æ·±é»‘è‰²</li>
                <li><strong>é€‰ä¸­ä¸‹æ–¹æ–‡å­—</strong> â†’ è‡ªåŠ¨æ ‡æ³¨ï¼Œä¸å¼¹çª—</li>
                <li><strong>æŸ¥çœ‹å³ä¸‹è§’çŠ¶æ€</strong> â†’ æ˜¾ç¤ºå½“å‰è®¾ç½®</li>
            </ol>
        </div>

        <!-- æ ¼å¼å·¥å…·æ  -->
        <div class="formatting-toolbar">
            <div class="format-group">
                <button type="button" id="formatBoldToggle" class="format-btn" title="åŠ ç²—">B</button>
                <button type="button" id="formatUnderlineToggle" class="format-btn" title="ä¸‹åˆ’çº¿">U</button>
                <button type="button" id="formatStrikethroughToggle" class="format-btn" title="åˆ é™¤çº¿">S</button>
            </div>

            <div class="format-group color-group">
                <button type="button" class="format-color" data-color="honey" title="èœœç³–è‰²"></button>
                <button type="button" class="format-color" data-color="mint" title="è–„è·è‰²"></button>
                <button type="button" class="format-color" data-color="sky" title="å¤©ç©ºè‰²"></button>
                <button type="button" class="format-color" data-color="orchid" title="å…°èŠ±è‰²"></button>
                <button type="button" class="format-color" data-color="sunset" title="è½æ—¥è‰²"></button>
            </div>

            <div class="format-group">
                <button type="button" class="format-border-btn" data-border="none" title="æ— è¾¹æ¡†">æ— </button>
                <button type="button" class="format-border-btn" data-border="square" title="æ–¹æ¡†">â–¡</button>
                <button type="button" class="format-border-btn" data-border="round" title="åœ†æ¡†">â—‹</button>
            </div>

            <button type="button" id="formatApplyBtn" class="ghost-btn format-apply">å¿«é€Ÿæ ‡æ³¨</button>
        </div>

        <!-- é˜…è¯»åŒº -->
        <section class="panel">
            <h2>ğŸ“– æµ‹è¯•æ–‡æœ¬</h2>
            <div id="readingArea" class="reading-area" tabindex="0">
                <p>Learning English is an important skill in today's globalized world. It opens up opportunities for communication, education, and career advancement.</p>
                <p>The journey of mastering a new language requires dedication, practice, and patience. Every word you learn brings you one step closer to fluency.</p>
                <p>Technology has made language learning more accessible than ever before. Online resources, apps, and interactive tools provide countless ways to improve your skills.</p>
            </div>
        </section>

        <!-- æ ‡æ³¨åˆ—è¡¨ -->
        <section class="panel">
            <h2>ğŸ·ï¸ æ ‡æ³¨åˆ—è¡¨</h2>
            <div id="annotationList"></div>
        </section>

        <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
        <div class="status-indicator">
            <h3>å½“å‰çŠ¶æ€</h3>
            <div class="status-item">
                <span>å¿«é€Ÿæ¨¡å¼:</span>
                <span class="status-value" id="statusMode">å…³é—­</span>
            </div>
            <div class="status-item">
                <span>é¢œè‰²:</span>
                <span class="status-value" id="statusColor">æœªé€‰æ‹©</span>
            </div>
            <div class="status-item">
                <span>åŠ ç²—:</span>
                <span class="status-value" id="statusBold">å¦</span>
            </div>
            <div class="status-item">
                <span>ä¸‹åˆ’çº¿:</span>
                <span class="status-value" id="statusUnderline">å¦</span>
            </div>
            <div class="status-item">
                <span>æ ‡æ³¨æ•°:</span>
                <span class="status-value" id="statusCount">0</span>
            </div>
        </div>

        <!-- æ ‡æ³¨å¯¹è¯æ¡†ï¼ˆéšè—ï¼Œå¿«é€Ÿæ¨¡å¼ä¸‹ä¸ä½¿ç”¨ï¼‰ -->
        <div id="selectionToolbar" class="selection-toolbar hidden">
            <!-- ä¿æŒåŸæœ‰ç»“æ„ï¼Œä½†å¿«é€Ÿæ¨¡å¼ä¸‹ä¸ä¼šæ˜¾ç¤º -->
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // çŠ¶æ€æ›´æ–°å‡½æ•°
        function updateStatusDisplay() {
            if (typeof state === 'undefined') return;

            document.getElementById('statusMode').textContent =
                (typeof quickAnnotationMode !== 'undefined' && quickAnnotationMode) ? 'âœ… å¼€å¯' : 'âŒ å…³é—­';

            document.getElementById('statusColor').textContent =
                state.lastColor || 'æœªé€‰æ‹©';

            document.getElementById('statusBold').textContent =
                state.lastBold ? 'âœ… æ˜¯' : 'âŒ å¦';

            document.getElementById('statusUnderline').textContent =
                state.lastUnderline ? 'âœ… æ˜¯' : 'âŒ å¦';

            document.getElementById('statusCount').textContent =
                state.annotations ? state.annotations.length : 0;
        }

        // å®šæœŸæ›´æ–°çŠ¶æ€æ˜¾ç¤º
        setInterval(updateStatusDisplay, 500);

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', function() {
            console.log('ğŸ§ª æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('âœ… stateå¯¹è±¡:', typeof state !== 'undefined' ? 'å·²åŠ è½½' : 'æœªåŠ è½½');
            console.log('âœ… showToastå‡½æ•°:', typeof showToast !== 'undefined' ? 'å·²åŠ è½½' : 'æœªåŠ è½½');
            console.log('âœ… quickAnnotationMode:', typeof quickAnnotationMode !== 'undefined' ? 'å·²å®šä¹‰' : 'æœªå®šä¹‰');

            updateStatusDisplay();
        });
    </script>
</body>
</html>
