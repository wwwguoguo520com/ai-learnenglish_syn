<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å¿«é€Ÿæ ‡æ³¨æ¨¡å¼ - å·¥ä½œæ¼”ç¤º</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fb;
        }

        .toolbar {
            display: flex;
            gap: 20px;
            padding: 16px;
            background: white;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            align-items: center;
        }

        .btn-group {
            display: flex;
            gap: 8px;
        }

        .format-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #d1d5db;
            background: white;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            font-size: 16px;
        }

        .format-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .color-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
        }

        .color-btn.active {
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        .color-btn.honey { background: #fef08a; }
        .color-btn.mint { background: #86efac; }
        .color-btn.sky { background: #7dd3fc; }
        .color-btn.orchid { background: #d8b4fe; }
        .color-btn.sunset { background: #fca5a1; }

        .quick-toggle {
            margin-left: auto;
            padding: 10px 24px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
        }

        .quick-toggle.active {
            background: #0f172a;
            box-shadow: 0 0 0 4px rgba(15, 23, 42, 0.2);
        }

        .reading-area {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            line-height: 1.8;
            font-size: 16px;
        }

        .reading-area p {
            margin: 0 0 16px 0;
        }

        .highlight {
            padding: 2px 4px;
            border-radius: 4px;
            cursor: pointer;
        }

        .highlight[data-color="honey"] { background: #fef08a; }
        .highlight[data-color="mint"] { background: #86efac; }
        .highlight[data-color="sky"] { background: #7dd3fc; }
        .highlight[data-color="orchid"] { background: #d8b4fe; }
        .highlight[data-color="sunset"] { background: #fca5a1; }

        .highlight[data-bold="true"] { font-weight: bold; }
        .highlight[data-underline="true"] { text-decoration: underline; }

        .annotations {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .annotation-item {
            padding: 12px;
            background: #f9fafb;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 4px solid #3b82f6;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 14px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .info {
            background: #dbeafe;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #3b82f6;
        }

        .info strong {
            color: #1e40af;
        }
    </style>
</head>
<body>
    <div class="info">
        <strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong><br>
        1ï¸âƒ£ ç‚¹å‡»é¢œè‰²ï¼ˆåœ†å½¢æŒ‰é’®ï¼‰<br>
        2ï¸âƒ£ ç‚¹å‡» Bï¼ˆåŠ ç²—ï¼‰<br>
        3ï¸âƒ£ ç‚¹å‡»"å¿«é€Ÿæ ‡æ³¨"ï¼ˆæŒ‰é’®å˜æ·±é»‘è‰²ï¼‰<br>
        4ï¸âƒ£ é€‰ä¸­ä¸‹æ–¹æ–‡å­— â†’ <strong>è‡ªåŠ¨æ ‡æ³¨ï¼ä¸å¼¹çª—ï¼</strong>
    </div>

    <!-- å·¥å…·æ  -->
    <div class="toolbar">
        <div class="btn-group">
            <button class="format-btn" id="boldBtn">B</button>
            <button class="format-btn" id="underlineBtn">U</button>
        </div>

        <div class="btn-group">
            <button class="color-btn honey" data-color="honey"></button>
            <button class="color-btn mint" data-color="mint"></button>
            <button class="color-btn sky" data-color="sky"></button>
            <button class="color-btn orchid" data-color="orchid"></button>
            <button class="color-btn sunset" data-color="sunset"></button>
        </div>

        <button class="quick-toggle" id="quickToggle">å¿«é€Ÿæ ‡æ³¨</button>
    </div>

    <!-- é˜…è¯»åŒº -->
    <div class="reading-area" id="readingArea">
        <p>Learning English is an important skill in today's globalized world.</p>
        <p>It opens up opportunities for communication, education, and career advancement.</p>
        <p>Technology has made language learning more accessible than ever before.</p>
    </div>

    <!-- æ ‡æ³¨åˆ—è¡¨ -->
    <div class="annotations">
        <h3>æ ‡æ³¨åˆ—è¡¨</h3>
        <div id="annotationList">æš‚æ— æ ‡æ³¨</div>
    </div>

    <script>
        // çŠ¶æ€
        const state = {
            quickMode: false,
            color: null,
            bold: false,
            underline: false,
            annotations: []
        };

        // DOMå…ƒç´ 
        const boldBtn = document.getElementById('boldBtn');
        const underlineBtn = document.getElementById('underlineBtn');
        const colorBtns = document.querySelectorAll('.color-btn');
        const quickToggle = document.getElementById('quickToggle');
        const readingArea = document.getElementById('readingArea');
        const annotationList = document.getElementById('annotationList');

        // Toastæç¤º
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 2000);
        }

        // åŠ ç²—åˆ‡æ¢
        boldBtn.addEventListener('click', () => {
            state.bold = !state.bold;
            boldBtn.classList.toggle('active', state.bold);
        });

        // ä¸‹åˆ’çº¿åˆ‡æ¢
        underlineBtn.addEventListener('click', () => {
            state.underline = !state.underline;
            underlineBtn.classList.toggle('active', state.underline);
        });

        // é¢œè‰²é€‰æ‹©
        colorBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                colorBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                state.color = btn.dataset.color;
            });
        });

        // å¿«é€Ÿæ ‡æ³¨æ¨¡å¼åˆ‡æ¢
        quickToggle.addEventListener('click', () => {
            state.quickMode = !state.quickMode;

            if (state.quickMode) {
                // å¼€å¯æ¨¡å¼
                quickToggle.classList.add('active');
                quickToggle.textContent = 'é€€å‡ºå¿«é€Ÿæ ‡æ³¨';
                showToast('âœ“ å¿«é€Ÿæ ‡æ³¨æ¨¡å¼å·²å¼€å¯');
            } else {
                // å…³é—­æ¨¡å¼
                quickToggle.classList.remove('active');
                quickToggle.textContent = 'å¿«é€Ÿæ ‡æ³¨';
                showToast('âœ“ å¿«é€Ÿæ ‡æ³¨æ¨¡å¼å·²å…³é—­');
            }
        });

        // ç›‘å¬æ–‡å­—é€‰æ‹©
        readingArea.addEventListener('mouseup', () => {
            if (!state.quickMode) return;

            const selection = window.getSelection();
            const selectedText = selection.toString().trim();

            if (!selectedText) return;
            if (!state.color) {
                showToast('âš ï¸ è¯·å…ˆé€‰æ‹©é¢œè‰²');
                selection.removeAllRanges();
                return;
            }

            // åˆ›å»ºé«˜äº®æ ‡æ³¨
            const range = selection.getRangeAt(0);
            const span = document.createElement('span');
            span.className = 'highlight';
            span.dataset.color = state.color;
            if (state.bold) span.dataset.bold = 'true';
            if (state.underline) span.dataset.underline = 'true';

            try {
                range.surroundContents(span);

                // ä¿å­˜æ ‡æ³¨ï¼ˆnoteå’Œtagsä¸ºç©ºï¼‰
                state.annotations.push({
                    text: selectedText,
                    color: state.color,
                    bold: state.bold,
                    underline: state.underline,
                    note: '',  // â† ç©ºï¼
                    tags: []   // â† ç©ºï¼
                });

                // æ›´æ–°åˆ—è¡¨
                updateAnnotationList();

                // æ¸…é™¤é€‰æ‹©
                selection.removeAllRanges();

                // æç¤º
                showToast('âœ“ å·²å¿«é€Ÿæ ‡æ³¨');
            } catch (e) {
                showToast('âš ï¸ æ ‡æ³¨å¤±è´¥');
                selection.removeAllRanges();
            }
        });

        // æ›´æ–°æ ‡æ³¨åˆ—è¡¨
        function updateAnnotationList() {
            if (state.annotations.length === 0) {
                annotationList.innerHTML = 'æš‚æ— æ ‡æ³¨';
                return;
            }

            annotationList.innerHTML = state.annotations.map((ann, i) => `
                <div class="annotation-item">
                    <strong>${i + 1}. ${ann.text}</strong><br>
                    é¢œè‰²: ${ann.color} | åŠ ç²—: ${ann.bold ? 'æ˜¯' : 'å¦'} | ä¸‹åˆ’çº¿: ${ann.underline ? 'æ˜¯' : 'å¦'}<br>
                    note: <em>${ann.note || '(ç©º)'}</em> | tags: <em>${ann.tags.length > 0 ? ann.tags.join(', ') : '(ç©º)'}</em>
                </div>
            `).join('');
        }

        console.log('âœ… å¿«é€Ÿæ ‡æ³¨æ¨¡å¼æ¼”ç¤ºå·²åŠ è½½');
        console.log('ğŸ“ é€‰ä¸­æ–‡å­—å‰ï¼Œè¯·å…ˆï¼š');
        console.log('   1. ç‚¹å‡»é¢œè‰²æŒ‰é’®');
        console.log('   2. ç‚¹å‡»Bï¼ˆå¯é€‰ï¼‰');
        console.log('   3. ç‚¹å‡»"å¿«é€Ÿæ ‡æ³¨"');
        console.log('   4. é€‰ä¸­æ–‡å­— â†’ è‡ªåŠ¨æ ‡æ³¨ï¼');
    </script>
</body>
</html>
